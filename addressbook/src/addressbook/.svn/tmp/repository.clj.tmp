(ns addressbook.repository
  (:use karras.core
    karras.collection
    karras.sugar))

(def test-db (collection (connect) :mydb :user))

(defn no-of-docs []
  (count-docs test-db))


(defn insert-rec [rec]
  (insert test-db rec))

(defn fetch-rec []
  (fetch-all test-db))
<<<<<<< .mine

(defn filter-db [data]
  (map #(dissoc % :_id) data))

(defn update-rec [rec]
  (update test-db (modify (where (eq :name (:name rec))) :emailId (:emailId rec) :age (:age rec))))

(defn delete-rec [rec]
  (def datav (fetch-one test-db (where (eq :name (:name rec)))))
  (println (:_id datav))
   (delete test-db datav) ;(where (eq :_id (:_id data))))
  )=======

(defn filter-db [data]
  (map #(dissoc % :_id) data))

(defn update-rec [rec]
  (update test-db (modify (where (eq :name (:name rec))) :emailId (:emailId rec) :age (:age rec))))

(defn delete-rec [rec]
  (delete test-db (where (eq :name (:name rec)))))>>>>>>> .r75070
